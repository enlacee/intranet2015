<!-- Mensaje de Confirmacion para eliminar Country -->
<div class="cont-mensaje">
    <div class="mensaje">
        <div class="header-mensaje">
            <h4>Confirmar Eliminación</h4>
        </div>
        <div class="body-mensaje">
            <button id="delSi" class="btn btn-danger">Si</button>
            <button id="delNo" class="btn btn-primary">No</button>
        </div>    
    </div>
</div>
<!-- Fin Mensaje de Confirmacion para eliminar Country -->
<div class="modal-dialog" role="document">
    <div class="modal-content">
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Add New Country</h4>
        </div>
        <form id="frmCountry" method="POST" action="http://localhost/acopitan/omar/intranet2015/src/index.php/country/create">
            <div class="modal-body">      
                <div class="form-group">
                    <label for="txtName">Name</label>
                    <input type="text" name="name" class="form-control" id="txtName" maxlength="20">
                </div>
                <div class="table-responsive" style="height: 200px;">
                    <table class="table table-bordered table-hover table-fondo">                  
                    <thead class="texto-centrado fontB">
                    <td>Name</td>                      
                    <td>Actión</td>
                    </thead>
                    <tr>
                        <td>chile</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="37"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>chile</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="5"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>china</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="3"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>china</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="32"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>costa rica</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="20"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>Dominican Repub</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="7"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>el salvador</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="15"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>españa</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="31"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>europe</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="2"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>india</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="6"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>japon</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="21"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>korea</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="1"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>mexico</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="10"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>peru</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="4"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>sadasd</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="33"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>sadasd</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="34"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>sadasd</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="35"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>sadasd</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="36"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>taiwan</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="8"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       
                    <tr>
                        <td>uk</td>                                                                      
                        <td style="text-align: center;"><a href="delete" class="btn btn-danger del-Country" data-id="17"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></a></td>
                    </tr>                       

                </table>          
                </div>  
            </div>
            <div class="modal-footer">            
                <input type="submit" class="btn btn-primary comSeparator" value="Save">
                <a href="http://localhost/acopitan/omar/intranet2015/src/index.php/supplier" class="btn btn-default" data-dismiss="modal">Return</a>
            </div>
        </form>
    </div>
</div>
<script>
    $(document).ready(function() {

        $('#frmCountry').submit(function(event) {
            if ($.trim($('input[name=name]').val()) == '') {
                event.preventDefault();
                return false;
            } else {
                event.preventDefault();
                $.post('http://localhost/acopitan/omar/intranet2015/src/index.php/country/create', {name: $('input[name=name]').val()}, function(data) {
                    $('#sltCountry').append('<option value="' + data + '" selected>' + $('input[name=name]').val() + '</option>');
                    $('#mContForm').modal('hide');
                });
            }
        });

        // Mensaje de confirmacion
        var idCountry = 0;
        var nFila = 0;

        $('table').on('click', 'a.del-Country', function(event) {
            event.preventDefault();
            idCountry = $(this).data('id');
            nFila = $(this).parent().parent().index();
            $('.cont-mensaje').fadeIn('500');
        });

        $('#delNo').click(function(event) {
            event.preventDefault();
            $('.cont-mensaje').fadeOut('500');
        });

        $('#delSi').click(function(event) {
            event.preventDefault();
            $.post('http://localhost/acopitan/omar/intranet2015/src/index.php/country/delete', {id: idCountry}, function(data) {
                if (data > 0) {
                    $('table tbody tr:eq(' + nFila + ')').remove();
                    $('#sltCountry option[value=' + idCountry + ']').remove();
                    $('.cont-mensaje').fadeOut('500');
                } else {
                    $('.cont-mensaje').fadeOut('500');
                }
            });
        });
        // Fin del Mensaje de confirmación
    });
</script>